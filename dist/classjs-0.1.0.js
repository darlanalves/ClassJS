/**
 * ClassJS
 * Author: Darlan Alves <darlan@moovia.com>
 * Built on 2013-05-23
 */

!function(a){"use strict";"undefined"!=typeof require&&(a={});var b={}.hasOwnProperty,c={},d=/xyz/.test(function(){xyz()})?/\b_super\b/:/.*/,e=function(a,c){var d;for(d in c)b.call(c,d)&&(a[d]=c[d])},f=function(){},g=f.prototype;e(g,{superclass:void 0,self:f});var h=function(a,c){var g,i,j=!1;a&&a===Object&&(a=f),c?(b.call(c,"statics")&&(j=c.statics,c.statics=!1,delete c.statics),b.call(c,"constructor")&&(i=c.constructor)):c={},i||(i=function(){return this.constructor.apply(this,arguments)});var k=function(){};k.prototype=a.prototype,k.prototype.__initialize__=!1,i.prototype=new k,i.prototype.__initialize__=!0,g=a.prototype;var l,m;for(l in c)"self"!==l&&"superclass"!==l&&(m=c[l],i.prototype[l]="function"==typeof m&&"function"==typeof g[l]&&d.test(m)?function(a,b,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);return this._super=d,e}}(l,g,m):m);return i.prototype.clone=function(){var a=this,b=new a.self;return e(a,b),b},j&&e(i,j),i.extend=function(a){return h(this,a)},i.superclass=i.prototype.superclass=g,i.prototype.self=i,i};f.extend=function(a,b){return h(a,b)},f.create=function(a){return h(f,a)},f.ns=function(b,d,e){var f,g,h,i;if(e=e||a,!b)return e;if(void 0!==c[b])e=c[b];else{if(i=b.split("."),0!==i.length)for(f=0,h=i.length;h>f;)g=i[f],e=e[g]||(e[g]={}),f++;c[b]=e}return"function"==typeof d&&d.call(e),e},f.get=function(b){if(!b)return null;if(void 0!==c[b])return c[b];for(var d,e=b.split("."),f=a;d=e.shift();)if(f=f[d],void 0===f)return null;return c[b]=f,f};var i=/\s{1}as\s{1}/i;f.use=function(){for(var a,b,c={},d=arguments,e=d.length;e--;)a=d[e],b=i.test(a)?a.split(i).pop():a.split(".").pop(),c[b]=f.get(a);return c},f.define=function(b,d){var e,g=b.split("."),i=g.pop(),j=0===g.length?a:f.ns(g.join(".")),k=f;if(d&&d.hasOwnProperty("extend")){var l=d.extend;if(d.extend=null,"string"==typeof l&&(l=f.get(l)),"function"!=typeof l)throw new Error("Invalid parent class!");delete d.extend,k=l}return c[b]=j[i]=e=h(k,d),e.$name=i,e.$className=b,e.$parent=j,e},f.instantiate=function(a,b){var c=f.get(a);if(null!==c)return new c(b);throw new Error("Class not found: "+a)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.Class=f):a.Class=f}(this),function(a){var b=(a._,[].slice),c=/\s+|,\s?/;a.EventEmitter=Class.define("EventEmitter",{pauseEvents:!1,getListeners:function(){return this.$callbacks||(this.$callbacks={})},addListener:function(a,d,e){if(d&&"function"==typeof d){var f,g,h,i=4<=arguments.length?b.call(arguments,3):[];for(a=a.split(c),f=this.getListeners();g=a.shift();)h=f[g]||(f[g]=[]),h.push({callback:d,context:e||this,params:i})}return this},removeListener:function(a,b,d){if(!(a||b||d))return delete this.$callbacks,this;for(var e=this.getListeners(),a=a.split(c),f=[],g=function(a){var c,d,f=e[a],g=[];if(void 0!==f){var h=function(c,d){b&&b===c.callback?g.push(delete e[a][d]):g.push(delete e[a])};for(c=0,d=f.length;d>c;c++)h(f[c],c)}return g};event=a.shift();)f.push(g.call(this,event));return f},trigger:function(a){var d,e,f,g,h,i,j=2<=arguments.length?b.call(arguments,1):[];if(e=this.getListeners(),this.pauseEvents||!e)return this;for(a?(a=a.split(c),a.push("all")):a=["all"];f=a.shift();)if(g=e[f])for(_i=0,_len=g.length;_len>_i&&(h=g[_i],i=[],h.params.length&&(i=i.concat(h.params)),j.length&&(i=i.concat(j)),d=h.callback.apply(h.context,i),d!==!1);_i++);return Boolean(d)},clearListeners:function(a){if(a){a=a.split(c);var b,d=this.getListeners();if(d)for(;b=a.shift();)d[b]=[]}else this.$callbacks={}},once:function(a,b,c){var d,e,f=this,g=!1;return c=c||this,d=function(){f.removeListener(a,e,c),b.apply(this,arguments)},e=function(){g||(g=!0,d.apply(this,arguments),d=null)},this.on(a,e,c),this},on:function(){this.addListener.apply(this,arguments)},off:function(){this.removeListener.apply(this,arguments)},suspendEvents:function(){return this.pauseEvents=!0,this},resumeEvents:function(){return this.pauseEvents=!1,this}})}(this);